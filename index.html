<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üéÑ Merry Christmas üéÑ</title>

<style>
  body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(to bottom, #8b0000, #ff4040);
    font-family: 'Comic Sans MS', Arial, sans-serif;
    color: white;
    text-align: center;
    overflow-x: hidden;
  }

  h1 {
    margin-top: 80px;
    font-size: 46px;
    animation: bounce 2s infinite;
  }

  .controls {
    display: none;
    margin-top: 20px;
  }

  .progress-container {
    width: 60%;
    height: 8px;
    background: rgba(255,255,255,0.3);
    border-radius: 10px;
    margin: 20px auto;
    overflow: hidden;
  }

  .progress-bar {
    height: 100%;
    width: 0%;
    background: #00ffcc;
  }

  .message {
    margin: 60px auto;
    font-size: 28px;
    width: 80%;
    opacity: 1;
    transition: opacity 0.8s ease;
  }

  .snowflake {
    position: fixed;
    top: -10px;
    color: white;
    animation: fall linear infinite;
    pointer-events: none;
  }

  @keyframes fall {
    to { transform: translateY(110vh); }
  }

  .santa-popup {
    position: fixed;
    bottom: -100px;
    left: 50%;
    transform: translateX(-100%);
    font-size: 80px;
    animation: santaPop 2s ease forwards;
    pointer-events: none;
  }

  @keyframes santaPop {
    0% { bottom: -120px; }
    50% { bottom: 60px; }
    100% { bottom: -120px; }
  }

  .confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    background: red;
    animation: confetti 2s ease-out forwards;
  }

  @keyframes confetti {
    to {
      transform: translate(var(--x), var(--y)) rotate(720deg);
      opacity: 0;
    }
  }

  .sparkle {
    position: fixed;
    font-size: 20px;
    animation: sparkle 1.5s ease-out forwards;
  }

  @keyframes sparkle {
    to {
      transform: translateY(-100px) scale(0);
      opacity: 0;
    }
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }
</style>
</head>

<body>

<div>
  <h1 id="taja"></h1>

  <div class="controls">
    ‚è± Change message every:
    <strong><span id="timeValue">3</span></strong> seconds
    <br><br>
    <input type="range" min="1" max="10" value="3" id="timeSlider" style="width: 250px;display: none;">
  </div>

  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="message" id="message"></div>

  <div id="startOverlay" style="
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,1);
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:32px;
    cursor:pointer;
    z-index:1000;
  ">
    üéÖ Tap to start Santa‚Äôs Christmas magic!
  </div>
</div>

<script>
  const overlay = document.getElementById("startOverlay");

  overlay.addEventListener("click", () => {
    overlay.style.display = "none";

    const utter = new SpeechSynthesisUtterance("");
    speechSynthesis.speak(utter);
    updateMessage();
  });

  const params = new URLSearchParams(window.location.search);
  const name = params.get("name") || "Ng";

const messages = [
  `Allow me to call you ${name}`,
  `Merry Christmas to you ${name}! Santa approves your smile.`,
  `This message comes with free joy`,
  `Ho Ho Ho!, Santa almost skipped you‚Ä¶ but changed his mind`,
  `Calories don‚Äôt count today. Enjoy `,
  `Santa says you deserves extra snacks`,
  `May today overload your happiness!`,
  `Smile ${name}, Christmas magic is real!`
];

let index = 0;
let interval = 6000;
let timer;

const taja = document.getElementById("taja");

taja.innerText = `Hey ${name},`;

const msg = document.getElementById("message");
const progressBar = document.getElementById("progressBar");

function santaSpeak(text) {
  if (!("speechSynthesis" in window)) return;

  const utter = new SpeechSynthesisUtterance(text);
  utter.rate = 0.9;
  utter.pitch = 0.8;
  utter.lang = "en-US";
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

function updateMessage() {
  msg.style.opacity = 0;

  setTimeout(() => {
    const text = messages[index % messages.length];
    msg.innerText = text;
    msg.style.opacity = 1;

    sparkleBurst();
    confettiBurst();
    santaSpeak(text);
    santaPopup();

    index++;
    restartProgressBar();
    timer = setTimeout(updateMessage, interval);
  }, 400);
}

const slider = document.getElementById("timeSlider");
const timeValue = document.getElementById("timeValue");

slider.addEventListener("input", () => {
  timeValue.innerText = slider.value;
  interval = slider.value * 1000;
});

function restartProgressBar() {
  progressBar.style.transition = "none";
  progressBar.style.width = "0%";
  setTimeout(() => {
    progressBar.style.transition = `width ${interval}ms linear`;
    progressBar.style.width = "100%";
  }, 50);
}

function createSnow() {
  const snow = document.createElement("div");
  snow.className = "snowflake";
  snow.innerText = "‚ùÑ";
  snow.style.left = Math.random() * window.innerWidth + "px";
  snow.style.animationDuration = 3 + Math.random() * 5 + "s";
  snow.style.fontSize = 10 + Math.random() * 20 + "px";
  document.body.appendChild(snow);
  setTimeout(() => snow.remove(), 8000);
}
setInterval(createSnow, 150);

function sparkleBurst() {
  for (let i = 0; i < 12; i++) {
    const s = document.createElement("div");
    s.className = "sparkle";
    s.innerText = ["‚ú®","üéÑ","üéÅ"][Math.floor(Math.random()*3)];
    s.style.left = Math.random() * window.innerWidth + "px";
    s.style.top = Math.random() * window.innerHeight + "px";
    document.body.appendChild(s);
    setTimeout(() => s.remove(), 1500);
  }
}

function confettiBurst() {
  for (let i = 0; i < 25; i++) {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.background = `hsl(${Math.random()*360},100%,50%)`;
    c.style.left = "50%";
    c.style.top = "50%";
    c.style.setProperty("--x", `${(Math.random()-0.5)*600}px`);
    c.style.setProperty("--y", `${(Math.random()-0.5)*600}px`);
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 2000);
  }
}

function santaPopup() {
  const santa = document.createElement("div");
  santa.className = "santa-popup";
  santa.innerText = "üéÖ";
  document.body.appendChild(santa);
  setTimeout(() => santa.remove(), 3000);
}

clearTimeout(timer);
</script>

</body>
</html>
